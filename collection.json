{
  "info": {
    "name": "Social-Network",
    "_postman_id": "uuid-here",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:8080",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Auth / Sessions",
      "item": [
        {
          "name": "Register User Test Variants",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{{currentUser}}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/auth/register",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "auth",
                "register"
              ]
            }
          },
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "// Initialize index",
                  "if (!pm.environment.get('currentIndex')) {",
                  "    pm.environment.set('currentIndex', 0);",
                  "}",
                  "// Array of test cases",
                  "const testCases = [",
                  "  {\"email\":\"user1@example.com\",\"password\":\"Pa$$w0rd!\",\"firstName\":\"John\",\"lastName\":\"Doe\",\"dateOfBirth\":\"2000-01-01\"},",
                  "  {\"email\":\"user2@example.com\",\"password\":\"Pa$$w0rd!\",\"firstName\":\"Jane\",\"lastName\":\"Smith\",\"dateOfBirth\":\"2000-02-02\"},",
                  "  {\"email\":\"user3@example.com\",\"password\":\"Pa$$w0rd!\",\"firstName\":\"Alice\",\"lastName\":\"Brown\",\"dateOfBirth\":\"2000-03-03\"},",
                  "  {\"email\":\"user4@example.com\",\"password\":\"Pa$$w0rd!\",\"firstName\":\"Bob\",\"lastName\":\"White\",\"dateOfBirth\":\"2000-04-04\"},",
                  "  {\"email\":\"avatar@example.com\",\"password\":\"Pa$$w0rd!\",\"firstName\":\"Avatar\",\"lastName\":\"User\",\"dateOfBirth\":\"1999-05-05\",\"nickname\":\"avuser\",\"aboutMe\":\"I have an avatar\",\"avatarId\":999999},",
                  "  {\"email\":\"invalid-email\",\"password\":\"123\",\"firstName\":\"Bad\",\"lastName\":\"Data\",\"dateOfBirth\":\"2000-01-01\"},",
                  "];",
                  "// Set current test case",
                  "let index = parseInt(pm.environment.get('currentIndex'));",
                  "pm.environment.set('currentUser', JSON.stringify(testCases[index]));"
                ]
              }
            },
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "// Capture response",
                  "const response = pm.response.json();",
                  "const status = pm.response.code;",
                  "",
                  "// Get current test case index",
                  "let index = parseInt(pm.environment.get('currentIndex'));",
                  "",
                  "// Define expected status per test case (200 for valid, 400 for invalid)",
                  "const expectedStatuses = [200, 200, 200, 200, 400, 400];",
                  "",
                  "// Test status code",
                  "pm.test('Check response status', function() {",
                  "    if (status === 500) {",
                  "        pm.environment.set('requestWith500', index);",
                  "        pm.expect.fail(`Request at index ${index} returned 500`);",
                  "    } else {",
                  "        pm.expect(status).to.eql(expectedStatuses[index]);",
                  "    }",
                  "});",
                  "",
                  "// Save userId/email for valid responses (status 200)",
                  "if (status === 200) {",
                  "    pm.environment.set(`userId_${index}`, response.payload.userId);",
                  "    pm.environment.set(`email_${index}`, response.payload.email);",
                  "}",
                  "",
                  "// Loop to next request",
                  "index++;",
                  "if (index < expectedStatuses.length) {",
                  "    pm.environment.set('currentIndex', index);",
                  "    pm.execution.setNextRequest('Register User Test Variants');",
                  "} else {",
                  "    pm.environment.unset('currentIndex');",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Logout Current Session",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/v1/auth/logout",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "auth",
                "logout"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "// Ensure logout was successful",
                  "pm.test('Logout status 200', function() {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Login User1",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email/userId/nickname\": \"{{email_0}}\",\n  \"password\": Pa$$w0rd!w0rd!\",\n  \"rememberMe\": true\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/auth/login",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "auth",
                "login"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "// Ensure login was successful",
                  "pm.test('Login status 200', function() {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "// Capture token or session info if returned",
                  "const response = pm.response.json();",
                  "if (response.payload.token) {",
                  "    pm.environment.set('sessionToken', response.payload.token);",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Get Current Session",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/api/v1/auth/session",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "auth",
                "session"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "// Ensure request succeeded",
                  "pm.test('Status code 200', function() {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "// Parse response JSON",
                  "const response = pm.response.json();",
                  "",
                  "// Store sessionId in environment variable",
                  "if (response && response.payload.sessionId) {",
                  "    pm.environment.set('sessionId', response.payload.sessionId);",
                  "    console.log('Session ID stored:', response.payload.sessionId);",
                  "} else {",
                  "    console.warn('No sessionId found in response');",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "List User Sessions",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/api/v1/sessions",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "sessions"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "// Ensure request succeeded",
                  "pm.test('Status code 200', function() {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "// Parse response JSON (array of sessions)",
                  "const sessions = pm.response.json();",
                  "",
                  "// Store all sessions in environment variable as JSON string",
                  "pm.environment.set('allSessions', JSON.stringify(sessions));",
                  "console.log('All sessions stored:', sessions);"
                ]
              }
            }
          ]
        },
        {
          "name": "Revoke Session by ID",
          "request": {
            "method": "DELETE",
            "url": {
              "raw": "{{base_url}}/api/v1/sessions/{{sessionId}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "sessions",
                "{{sessionId}}"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "// âœ… Expect success",
                  "pm.test('Status code is 200', function() {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Users / Profiles",
      "item": [
        {
          "name": "Register User Test Variants",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{{currentUser}}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/auth/register",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "auth",
                "register"
              ]
            }
          },
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "// Initialize index",
                  "if (!pm.environment.get('currentIndex')) {",
                  "    pm.environment.set('currentIndex', 0);",
                  "}",
                  "// Array of test cases",
                  "const testCases = [",
                  "  {\"email\":\"profile1@example.com\",\"password\":\"Pa$$w0rd!\",\"firstName\":\"John\",\"lastName\":\"Doe\",\"dateOfBirth\":\"2000-01-01\"},",
                  "  {\"email\":\"profile2@example.com\",\"password\":\"Pa$$w0rd!\",\"firstName\":\"Jane\",\"lastName\":\"Smith\",\"dateOfBirth\":\"2000-02-02\"},",
                  "];",
                  "// Set current test case",
                  "let index = parseInt(pm.environment.get('currentIndex'));",
                  "pm.environment.set('currentUser', JSON.stringify(testCases[index]));"
                ]
              }
            },
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "// Capture response",
                  "const raw = pm.response.text();",
                  "const safe = raw.replace(/\"userId\":(\\d+)/, '\"userId\":\"$1\"');",
                  "const response = JSON.parse(safe);",
                  "const status = pm.response.code;",
                  "",
                  "// Get current test case index",
                  "let index = parseInt(pm.environment.get('currentIndex'));",
                  "",
                  "// Define expected status per test case (200 for valid, 400 for invalid)",
                  "const expectedStatuses = [200, 200];",
                  "",
                  "// Test status code",
                  "pm.test('Check response status', function() {",
                  "    if (status === 500) {",
                  "        pm.environment.set('requestWith500', index);",
                  "        pm.expect.fail(`Request at index ${index} returned 500`);",
                  "    } else {",
                  "        pm.expect(status).to.eql(expectedStatuses[index]);",
                  "    }",
                  "});",
                  "",
                  "// Save userId/email for valid responses (status 200)",
                  "if (status === 200) {",
                  "    pm.environment.set(`userId_${index}`, String(response.payload.userId));",
                  "    pm.environment.set(`email_${index}`, response.payload.email);",
                  "}",
                  "",
                  "// Loop to next request",
                  "index++;",
                  "if (index < expectedStatuses.length) {",
                  "    pm.environment.set('currentIndex', index);",
                  "    pm.execution.setNextRequest('Register User Test Variants');",
                  "} else {",
                  "    pm.environment.unset('currentIndex');",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Login User1",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email/userId/nickname\": \"{{email_0}}\",\n  \"password\": \"Pa$$w0rd!\",\n  \"rememberMe\": true\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/auth/login",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "auth",
                "login"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "// Ensure login was successful",
                  "pm.test('Login status 200', function() {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  ""
                ]
              }
            }
          ]
        },
        {
          "name": "Get User Profile",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/v1/users/{{userId_0}}/profile",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "users",
                "{{userId_0}}",
                "profile"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function() {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "// Optionally save the response for later use",
                  "const profile = pm.response.json();",
                  "pm.environment.set('userProfile', JSON.stringify(profile));"
                ]
              }
            }
          ]
        },
        {
          "name": "Update Own Profile",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"firstName\": \"UpdatedFirst\",\n  \"lastName\": \"UpdatedLast\",\n  \"nickname\": \"updatedNick\",\n  \"aboutMe\": \"Updated about me info.\",\n  \"dateOfBirth\": \"2000-12-31\",\n  \"email\": \"updated@example.com\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/users/{{userId_0}}/profile",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "users",
                "{{userId_0}}",
                "profile"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "// Status code must be 200",
                  "pm.test('Status code is 200', function() {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "// Response must contain message",
                  "const res = pm.response.json();",
                  "pm.test('Response has success message', function() {",
                  "    pm.expect(res.payload).to.have.property('message', \"Updated successful.\");",
                  "});",
                  "",
                  "// Save the updated profile if needed",
                  "pm.environment.set('updatedUserProfile', pm.request.body.raw);"
                ]
              }
            }
          ]
        },
        {
          "name": "Toggle Profile Privacy",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"privacy\": \"private\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/users/{{userId_0}}/privacy",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "users",
                "{{userId_0}}",
                "privacy"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "// Status code must be 200",
                  "pm.test('Status code is 200', function() {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "// Response must contain success message",
                  "const res = pm.response.json();",
                  "pm.test('Response has success message', function() {",
                  "    pm.expect(res.payload).to.have.property('message', \"Profile privacy updated successfully.\");",
                  "});",
                  "",
                  "// Save current privacy if needed",
                  "pm.environment.set('currentUserPrivacy', 'private');"
                ]
              }
            }
          ]
        },
        {
          "name": "Get User Stats",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/api/v1/users/{{userId_0}}/stats",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "users",
                "{{userId_0}}",
                "stats"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "// Ensure status code is 200",
                  "pm.test('Status code is 200', function() {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "// Optionally, capture stats object",
                  "const stats = pm.response.json();",
                  "pm.environment.set('currentUserStats', JSON.stringify(stats));"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Follow Request Flow",
      "item": [
        {
          "name": "Register User Test Variants",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{{currentUser}}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/auth/register",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "auth",
                "register"
              ]
            }
          },
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "// Initialize index",
                  "if (!pm.environment.get('currentIndex')) {",
                  "    pm.environment.set('currentIndex', 0);",
                  "}",
                  "// Array of test cases",
                  "const testCases = [",
                  "  {\"email\":\"follow1@example.com\",\"password\":\"Pa$$w0rd!\",\"firstName\":\"John\",\"lastName\":\"Doe\",\"dateOfBirth\":\"2000-01-01\"},",
                  "  {\"email\":\"follow2@example.com\",\"password\":\"Pa$$w0rd!\",\"firstName\":\"Jane\",\"lastName\":\"Smith\",\"dateOfBirth\":\"2000-02-02\"},",
                  "];",
                  "// Set current test case",
                  "let index = parseInt(pm.environment.get('currentIndex'));",
                  "pm.environment.set('currentUser', JSON.stringify(testCases[index]));"
                ]
              }
            },
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "// Capture response",
                  "const response = pm.response.json();",
                  "const status = pm.response.code;",
                  "",
                  "// Get current test case index",
                  "let index = parseInt(pm.environment.get('currentIndex'));",
                  "",
                  "// Define expected status per test case (200 for valid, 400 for invalid)",
                  "const expectedStatuses = [200, 200, 200, 200, 400, 400];",
                  "",
                  "// Test status code",
                  "pm.test('Check response status', function() {",
                  "    if (status === 500) {",
                  "        pm.environment.set('requestWith500', index);",
                  "        pm.expect.fail(`Request at index ${index} returned 500`);",
                  "    } else {",
                  "        pm.expect(status).to.eql(expectedStatuses[index]);",
                  "    }",
                  "});",
                  "",
                  "// Save userId/email for valid responses (status 200)",
                  "if (status === 200) {",
                  "    pm.environment.set(`userId_${index}`, response.payload.userId);",
                  "    pm.environment.set(`email_${index}`, response.payload.email);",
                  "}",
                  "",
                  "// Loop to next request",
                  "index++;",
                  "if (index < expectedStatuses.length) {",
                  "    pm.environment.set('currentIndex', index);",
                  "    pm.execution.setNextRequest('Register User Test Variants');",
                  "} else {",
                  "    pm.environment.unset('currentIndex');",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Login User1",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"email\":\"{{email_0}}\",\"password\":\"Pa$$w0rd!\",\"rememberMe\":true}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/auth/login"
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "// capture cookie automatically, Postman handles this",
                  "pm.test('Login User1 should be 200', function() {",
                  "    pm.expect(pm.response.code).to.eql(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Toggle Profile Privacy",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"privacy\": \"private\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/users/{{userId_0}}/privacy",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "users",
                "{{userId_0}}",
                "privacy"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "// Status code must be 200",
                  "pm.test('Status code is 200', function() {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "// Response must contain success message",
                  "const res = pm.response.json();",
                  "pm.test('Response has success message', function() {",
                  "    pm.expect(res.payload).to.have.property('message', \"Profile privacy updated successfully.\");",
                  "});",
                  "",
                  "// Save current privacy if needed",
                  "pm.environment.set('currentUserPrivacy', 'private');"
                ]
              }
            }
          ]
        },
        {
          "name": "User1 follows User2",
          "request": {
            "method": "POST",
            "url": {
              "raw": "{{base_url}}/api/v1/users/{{userId_1}}/follow"
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Follow request sent', function() {",
                  "    pm.expect(pm.response.code).to.eql(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Login User2",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"email\":\"{{email_1}}\",\"password\":\"Pa$$w0rd!\",\"rememberMe\":true}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/auth/login"
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Login User2 should be 200', function() {",
                  "    pm.expect(pm.response.code).to.eql(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "User2 accepts follow request from User1",
          "request": {
            "method": "POST",
            "url": {
              "raw": "{{base_url}}/api/v1/follow-requests/{{userId_0}}/accept"
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Follow request accepted', function() {",
                  "    pm.expect(pm.response.code).to.eql(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "User2 follows User1",
          "request": {
            "method": "POST",
            "url": {
              "raw": "{{base_url}}/api/v1/users/{{userId_0}}/follow"
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Follow request sent', function() {",
                  "    pm.expect(pm.response.code).to.eql(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Login User1 Again",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"email\":\"{{email_0}}\",\"password\":\"Pa$$w0rd!\",\"rememberMe\":true}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/auth/login"
            }
          }
        },
        {
          "name": "User1 declines follow request",
          "request": {
            "method": "POST",
            "url": {
              "raw": "{{base_url}}/api/v1/follow-requests/{{userId_1}}/decline"
            }
          }
        },
        {
          "name": "User1 lists follow requests",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/api/v1/follow-requests"
            }
          }
        },
        {
          "name": "User1 lists following",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/api/v1/users/{{userId_0}}/following"
            }
          }
        }
      ]
    },
    {
      "name": "Groups",
      "item": [
        {
          "name": "Register User Test Variants",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{{currentUser}}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/auth/register",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "auth",
                "register"
              ]
            }
          },
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "// Initialize index",
                  "if (!pm.environment.get('currentIndex')) {",
                  "    pm.environment.set('currentIndex', 0);",
                  "}",
                  "// Array of test cases",
                  "const testCases = [",
                  "  {\"email\":\"group1@example.com\",\"password\":\"Pa$$w0rd!\",\"firstName\":\"John\",\"lastName\":\"Doe\",\"dateOfBirth\":\"2000-01-01\"},",
                  "  {\"email\":\"group2@example.com\",\"password\":\"Pa$$w0rd!\",\"firstName\":\"Jane\",\"lastName\":\"Smith\",\"dateOfBirth\":\"2000-02-02\"},",
                  "];",
                  "// Set current test case",
                  "let index = parseInt(pm.environment.get('currentIndex'));",
                  "pm.environment.set('currentUser', JSON.stringify(testCases[index]));"
                ]
              }
            },
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "// Capture response",
                  "const response = pm.response.json();",
                  "const status = pm.response.code;",
                  "",
                  "// Get current test case index",
                  "let index = parseInt(pm.environment.get('currentIndex'));",
                  "",
                  "// Define expected status per test case (200 for valid, 400 for invalid)",
                  "const expectedStatuses = [200, 200, 200, 200, 400, 400];",
                  "",
                  "// Test status code",
                  "pm.test('Check response status', function() {",
                  "    if (status === 500) {",
                  "        pm.environment.set('requestWith500', index);",
                  "        pm.expect.fail(`Request at index ${index} returned 500`);",
                  "    } else {",
                  "        pm.expect(status).to.eql(expectedStatuses[index]);",
                  "    }",
                  "});",
                  "",
                  "// Save userId/email for valid responses (status 200)",
                  "if (status === 200) {",
                  "    pm.environment.set(`userId_${index}`, response.payload.userId);",
                  "    pm.environment.set(`email_${index}`, response.payload.email);",
                  "}",
                  "",
                  "// Loop to next request",
                  "index++;",
                  "if (index < expectedStatuses.length) {",
                  "    pm.environment.set('currentIndex', index);",
                  "    pm.execution.setNextRequest('Register User Test Variants');",
                  "} else {",
                  "    pm.environment.unset('currentIndex');",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Login User1",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"email\":\"{{email_0}}\",\"password\":\"Pa$$w0rd!\",\"rememberMe\":true}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/auth/login"
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "// capture cookie automatically, Postman handles this",
                  "pm.test('Login User1 should be 200', function() {",
                  "    pm.expect(pm.response.code).to.eql(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Create Group",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Go Developers\",\n  \"description\": \"A group for sharing Go programming tips and projects.\",\n  \"avatarId\": 657543234567865\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/groups",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "groups"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Group creation returns 200', function() {",
                  "    pm.expect(pm.response.code).to.eql(200);",
                  "});",
                  "",
                  "pm.test('Store group_id', function() {",
                  "    const jsonData = pm.response.json();",
                  "    pm.environment.set('groupId', jsonData.payload.groupId);",
                  "    pm.expect(jsonData.payload.groupId).to.exist;",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Get Group Info",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/api/v1/groups/{{groupId}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "groups",
                "{{groupId}}"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Get group info returns 200', function() {",
                  "    pm.expect(pm.response.code).to.eql(200);",
                  "});",
                  "pm.test('Group info has groupId', function() {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.groupId).to.eql(pm.environment.get('groupId'));",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Update Group",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Advanced Go Developers\",\n  \"description\": \"A group for advanced Go programming discussions and projects.\",\n  \"avatarId\": 657543234567865\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/groups/{{groupId}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "groups",
                "{{groupId}}"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Update group returns 200', function() {",
                  "    pm.expect(pm.response.code).to.eql(200);",
                  "});",
                  "pm.test('Update success message', function() {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.payload.message).to.eql(\"Updated successful.\");",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Delete Group",
          "request": {
            "method": "DELETE",
            "url": {
              "raw": "{{base_url}}/api/v1/groups/{{groupId}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "groups",
                "{{groupId}}"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Delete group returns 200', function() {",
                  "    pm.expect(pm.response.code).to.eql(200);",
                  "});",
                  "pm.test('Delete success message', function() {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.message).to.eql('Logout successful.'); // or 'Deleted successful.' if your API returns that",
                  "});",
                  "// Clean up variable",
                  "pm.environment.unset('groupId');"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Group Events",
      "item": [
        {
          "name": "Register User Test Variants",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{{currentUser}}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/auth/register",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "auth",
                "register"
              ]
            }
          },
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "// Initialize index",
                  "if (!pm.environment.get('currentIndex')) {",
                  "    pm.environment.set('currentIndex', 0);",
                  "}",
                  "// Array of test cases",
                  "const testCases = [",
                  "  {\"email\":\"groupEvent1@example.com\",\"password\":\"Pa$$w0rd!\",\"firstName\":\"John\",\"lastName\":\"Doe\",\"dateOfBirth\":\"2000-01-01\"},",
                  "];",
                  "// Set current test case",
                  "let index = parseInt(pm.environment.get('currentIndex'));",
                  "pm.environment.set('currentUser', JSON.stringify(testCases[index]));"
                ]
              }
            },
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "// Capture response",
                  "const response = pm.response.json();",
                  "const status = pm.response.code;",
                  "",
                  "// Get current test case index",
                  "let index = parseInt(pm.environment.get('currentIndex'));",
                  "",
                  "// Define expected status per test case (200 for valid, 400 for invalid)",
                  "const expectedStatuses = [200, 200, 200, 200, 400, 400];",
                  "",
                  "// Test status code",
                  "pm.test('Check response status', function() {",
                  "    if (status === 500) {",
                  "        pm.environment.set('requestWith500', index);",
                  "        pm.expect.fail(`Request at index ${index} returned 500`);",
                  "    } else {",
                  "        pm.expect(status).to.eql(expectedStatuses[index]);",
                  "    }",
                  "});",
                  "",
                  "// Save userId/email for valid responses (status 200)",
                  "if (status === 200) {",
                  "    pm.environment.set(`userId_${index}`, response.payload.userId);",
                  "    pm.environment.set(`email_${index}`, response.payload.email);",
                  "}",
                  "",
                  "// Loop to next request",
                  "index++;",
                  "if (index < expectedStatuses.length) {",
                  "    pm.environment.set('currentIndex', index);",
                  "    pm.execution.setNextRequest('Register User Test Variants');",
                  "} else {",
                  "    pm.environment.unset('currentIndex');",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Login User1",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"email\":\"{{email_0}}\",\"password\":\"Pa$$w0rd!\",\"rememberMe\":true}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/auth/login"
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "// capture cookie automatically, Postman handles this",
                  "pm.test('Login User1 should be 200', function() {",
                  "    pm.expect(pm.response.code).to.eql(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Create Group",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Go Developers\",\n  \"description\": \"A group for sharing Go programming tips and projects.\",\n  \"avatarId\": 657543234567865\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/groups",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "groups"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Group creation returns 200', function() {",
                  "    pm.expect(pm.response.code).to.eql(200);",
                  "});",
                  "",
                  "pm.test('Store group_id', function() {",
                  "    const jsonData = pm.response.json();",
                  "    pm.environment.set('groupId', jsonData.groupId);",
                  "    pm.expect(jsonData.groupId).to.exist;",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Create Event",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Weekly Study Meetup\",\n  \"description\": \"Discussion about system design topics.\",\n  \"start_at\": \"2025-11-02T18:00:00Z\",\n  \"end_at\": \"2025-11-02T20:00:00Z\",\n  \"location\": \"Group voice room\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/groups/{{groupId}}/events",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "groups",
                "{{groupId}}",
                "events"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Create event returns 200', function() {",
                  "    pm.expect(pm.response.code).to.eql(200);",
                  "});",
                  "pm.test('Store event_id', function() {",
                  "    const jsonData = pm.response.json();",
                  "    pm.environment.set('eventId', jsonData.eventId);",
                  "    pm.expect(jsonData.eventId).to.exist;",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "List Events",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/api/v1/groups/{{groupId}}/events",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "groups",
                "{{groupId}}",
                "events"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('List events returns 200', function() {",
                  "    pm.expect(pm.response.code).to.eql(200);",
                  "});",
                  "pm.test('Events array exists', function() {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.be.an('array');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Get Event",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/api/v1/events/{{eventId}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "events",
                "{{eventId}}"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Get event returns 200', function() {",
                  "    pm.expect(pm.response.code).to.eql(200);",
                  "});",
                  "pm.test('Event has correct id', function() {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.eventId).to.eql(pm.environment.get('eventId'));",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "RSVP Event",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"option\": \"going\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/events/{{eventId}}/rsvp",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "events",
                "{{eventId}}",
                "rsvp"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('RSVP returns 200', function() {",
                  "    pm.expect(pm.response.code).to.eql(200);",
                  "});",
                  "pm.test('RSVP success message', function() {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.message).to.eql('RSVP successful.');",
                  "});"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Posts / Comments / Reactions",
      "item": [
        {
          "name": "Register User Test Variants",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{{currentUser}}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/auth/register",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "auth",
                "register"
              ]
            }
          },
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "// Initialize index",
                  "if (!pm.environment.get('currentIndex')) {",
                  "    pm.environment.set('currentIndex', 0);",
                  "}",
                  "// Array of test cases",
                  "const testCases = [",
                  "  {\"email\":\"post1@example.com\",\"password\":\"Pa$$w0rd!\",\"firstName\":\"John\",\"lastName\":\"Doe\",\"dateOfBirth\":\"2000-01-01\"},",
                  "];",
                  "// Set current test case",
                  "let index = parseInt(pm.environment.get('currentIndex'));",
                  "pm.environment.set('currentUser', JSON.stringify(testCases[index]));"
                ]
              }
            },
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "// Capture response",
                  "const response = pm.response.json();",
                  "const status = pm.response.code;",
                  "",
                  "// Get current test case index",
                  "let index = parseInt(pm.environment.get('currentIndex'));",
                  "",
                  "// Define expected status per test case (200 for valid, 400 for invalid)",
                  "const expectedStatuses = [200, 200, 200, 200, 400, 400];",
                  "",
                  "// Test status code",
                  "pm.test('Check response status', function() {",
                  "    if (status === 500) {",
                  "        pm.environment.set('requestWith500', index);",
                  "        pm.expect.fail(`Request at index ${index} returned 500`);",
                  "    } else {",
                  "        pm.expect(status).to.eql(expectedStatuses[index]);",
                  "    }",
                  "});",
                  "",
                  "// Save userId/email for valid responses (status 200)",
                  "if (status === 200) {",
                  "    pm.environment.set(`userId_${index}`, response.payload.userId);",
                  "    pm.environment.set(`email_${index}`, response.payload.email);",
                  "}",
                  "",
                  "// Loop to next request",
                  "index++;",
                  "if (index < expectedStatuses.length) {",
                  "    pm.environment.set('currentIndex', index);",
                  "    pm.execution.setNextRequest('Register User Test Variants');",
                  "} else {",
                  "    pm.environment.unset('currentIndex');",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Login User1",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"email\":\"{{email_0}}\",\"password\":\"Pa$$w0rd!\",\"rememberMe\":true}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/auth/login"
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "// capture cookie automatically, Postman handles this",
                  "pm.test('Login User1 should be 200', function() {",
                  "    pm.expect(pm.response.code).to.eql(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Create Post",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"content\": \"Hello world â€” launching my new service today!\",\n  \"privacy\": \"public\",\n  \"allowedList\": [1289843874658, 1289843874658],\n  \"groupId\": null,\n  \"mediaIds\": [1289843874657, 1289843872746]\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/posts",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "posts"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "// âœ… Check success",
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "// âœ… Parse and store postId",
                  "let json = pm.response.json();",
                  "if (json.postId) {",
                  "    pm.environment.set('postId', json.payload.postId);",
                  "    console.log('Stored postId:', json.payload.postId);",
                  "} else {",
                  "    console.warn('âš ï¸ postId not found in response');",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Get Single Post",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/v1/posts/{{postId}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "posts",
                "{{postId}}"
              ]
            }
          }
        },
        {
          "name": "Add Comment",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"content\": \"Great post! Learned a lot.\",\n  \"mediaIds\": [901, 902]\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/posts/{{postId}}/comments",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "posts",
                "{{postId}}",
                "comments"
              ]
            }
          }
        },
        {
          "name": "List Comments",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/v1/posts/{{postId}}/comments",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "posts",
                "{{postId}}",
                "comments"
              ]
            }
          }
        },
        {
          "name": "Like Post",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/v1/posts/{{postId}}/like",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "posts",
                "{{postId}}",
                "like"
              ]
            }
          }
        },
        {
          "name": "Remove Like",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/v1/posts/{{postId}}/like",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "posts",
                "{{postId}}",
                "like"
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Feed",
      "item": [
        {
          "name": "Register User Test Variants",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{{currentUser}}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/auth/register",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "auth",
                "register"
              ]
            }
          },
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "// Initialize index",
                  "if (!pm.environment.get('currentIndex')) {",
                  "    pm.environment.set('currentIndex', 0);",
                  "}",
                  "// Array of test cases",
                  "const testCases = [",
                  "  {\"email\":\"feed1@example.com\",\"password\":\"Pa$$w0rd!\",\"firstName\":\"John\",\"lastName\":\"Doe\",\"dateOfBirth\":\"2000-01-01\"},",
                  "];",
                  "// Set current test case",
                  "let index = parseInt(pm.environment.get('currentIndex'));",
                  "pm.environment.set('currentUser', JSON.stringify(testCases[index]));"
                ]
              }
            },
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "// Capture response",
                  "const response = pm.response.json();",
                  "const status = pm.response.code;",
                  "",
                  "// Get current test case index",
                  "let index = parseInt(pm.environment.get('currentIndex'));",
                  "",
                  "// Define expected status per test case (200 for valid, 400 for invalid)",
                  "const expectedStatuses = [200, 200, 200, 200, 400, 400];",
                  "",
                  "// Test status code",
                  "pm.test('Check response status', function() {",
                  "    if (status === 500) {",
                  "        pm.environment.set('requestWith500', index);",
                  "        pm.expect.fail(`Request at index ${index} returned 500`);",
                  "    } else {",
                  "        pm.expect(status).to.eql(expectedStatuses[index]);",
                  "    }",
                  "});",
                  "",
                  "// Save userId/email for valid responses (status 200)",
                  "if (status === 200) {",
                  "    pm.environment.set(`userId_${index}`, response.payload.userId);",
                  "    pm.environment.set(`email_${index}`, response.payload.email);",
                  "}",
                  "",
                  "// Loop to next request",
                  "index++;",
                  "if (index < expectedStatuses.length) {",
                  "    pm.environment.set('currentIndex', index);",
                  "    pm.execution.setNextRequest('Register User Test Variants');",
                  "} else {",
                  "    pm.environment.unset('currentIndex');",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Login User1",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"email\":\"{{email_0}}\",\"password\":\"Pa$$w0rd!\",\"rememberMe\":true}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/auth/login"
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "// capture cookie automatically, Postman handles this",
                  "pm.test('Login User1 should be 200', function() {",
                  "    pm.expect(pm.response.code).to.eql(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Create Group",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Go Developers\",\n  \"description\": \"A group for sharing Go programming tips and projects.\",\n  \"avatarId\": 657543234567865\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/groups",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "groups"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Group creation returns 200', function() {",
                  "    pm.expect(pm.response.code).to.eql(200);",
                  "});",
                  "",
                  "pm.test('Store group_id', function() {",
                  "    const jsonData = pm.response.json();",
                  "    pm.environment.set('groupId', jsonData.payload.groupId);",
                  "    pm.expect(jsonData.payload.groupId).to.exist;",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Get Personal Feed",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/api/v1/feed?page=1&limit=20",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "feed"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "20"
                }
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Personal feed returns 200', function () {",
                  "    pm.expect(pm.response.code).to.eql(200);",
                  "});",
                  "pm.test('Personal feed has items', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.be.an('array');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Get User Feed",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/api/v1/users/{{userId_0}}/feed?page=1&limit=20",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "users",
                "{{userId_0}}",
                "feed"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "20"
                }
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('User feed returns 200', function () {",
                  "    pm.expect(pm.response.code).to.eql(200);",
                  "});",
                  "pm.test('User feed has items', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.be.an('array');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Get Group Feed",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/api/v1/groups/{{groupId}}/feed?page=1&limit=20",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "groups",
                "{{groupId}}",
                "feed"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "20"
                }
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Group feed returns 200', function () {",
                  "    pm.expect(pm.response.code).to.eql(200);",
                  "});",
                  "pm.test('Group feed has items', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.be.an('array');",
                  "});"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Media",
      "item": [
        {
          "name": "Upload Media",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"fileName\": \"avatar.png\",\n  \"fileType\": \"image/png\",\n  \"fileData\": \"base64-encoded-file-data\",\n  \"Purpose\": \"avatar\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/media/upload",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "media",
                "upload"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "// âœ… Check success response",
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "// âœ… Parse JSON response and store mediaId in environment",
                  "let json = pm.response.json();",
                  "if (json.mediaId) {",
                  "    pm.environment.set('mediaId', json.mediaId);",
                  "    console.log('Stored mediaId:', json.mediaId);",
                  "} else {",
                  "    console.warn('âš ï¸ mediaId not found in response');",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Get Media",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/v1/media/{{mediaId}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "media",
                "{{mediaId}}"
              ]
            }
          }
        },
        {
          "name": "Delete Media",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/v1/media/{{mediaId}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "media",
                "{{mediaId}}"
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Chats",
      "item": [
        {
          "name": "Register User Test Variants",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{{currentUser}}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/auth/register",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "auth",
                "register"
              ]
            }
          },
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "// Initialize index",
                  "if (!pm.environment.get('currentIndex')) {",
                  "    pm.environment.set('currentIndex', 0);",
                  "}",
                  "// Array of test cases",
                  "const testCases = [",
                  "  {\"email\":\"chat1@example.com\",\"password\":\"Pa$$w0rd!\",\"firstName\":\"John\",\"lastName\":\"Doe\",\"dateOfBirth\":\"2000-01-01\"},",
                  "  {\"email\":\"chat22@example.com\",\"password\":\"Pa$$w0rd!\",\"firstName\":\"Jane\",\"lastName\":\"Smith\",\"dateOfBirth\":\"2000-02-02\"},",
                  "];",
                  "// Set current test case",
                  "let index = parseInt(pm.environment.get('currentIndex'));",
                  "pm.environment.set('currentUser', JSON.stringify(testCases[index]));"
                ]
              }
            },
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "// Capture response",
                  "const response = pm.response.json();",
                  "const status = pm.response.code;",
                  "",
                  "// Get current test case index",
                  "let index = parseInt(pm.environment.get('currentIndex'));",
                  "",
                  "// Define expected status per test case (200 for valid, 400 for invalid)",
                  "const expectedStatuses = [200, 200];",
                  "",
                  "// Test status code",
                  "pm.test('Check response status', function() {",
                  "    if (status === 500) {",
                  "        pm.environment.set('requestWith500', index);",
                  "        pm.expect.fail(`Request at index ${index} returned 500`);",
                  "    } else {",
                  "        pm.expect(status).to.eql(expectedStatuses[index]);",
                  "    }",
                  "});",
                  "",
                  "// Save userId/email for valid responses (status 200)",
                  "if (status === 200) {",
                  "    pm.environment.set(`userId_${index}`, response.payload.userId);",
                  "    pm.environment.set(`email_${index}`, response.payload.email);",
                  "}",
                  "",
                  "// Loop to next request",
                  "index++;",
                  "if (index < expectedStatuses.length) {",
                  "    pm.environment.set('currentIndex', index);",
                  "    pm.execution.setNextRequest('Register User Test Variants');",
                  "} else {",
                  "    pm.environment.unset('currentIndex');",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Login User0",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"email\":\"{{email_0}}\",\"password\":\"Pa$$w0rd!\",\"rememberMe\":true}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/auth/login",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "auth",
                "login"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Login User0 should be 200', function() {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "console.log('âœ… Logged in as User0');"
                ]
              }
            }
          ]
        },
        {
          "name": "List Conversations",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/v1/chats",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "chats"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "// âœ… Expect 200 OK",
                  "pm.test('List Conversations OK', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "// âœ… Parse response and store the first chatId only",
                  "let chats = pm.response.json();",
                  "if (Array.isArray(chats) && chats.payload.length > 0) {",
                  "    let firstChatId = chats[0].payload.chatId;",
                  "    pm.environment.set('chatId', firstChatId);",
                  "    console.log('âœ… Stored chatId:', firstChatId);",
                  "} else {",
                  "    console.warn('âš ï¸ No chat found in response');",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Send Message (User0 â†’ User1)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"text\": \"Hello user_1, how are you?\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/chats/{{chatId}}/messages",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "chats",
                "{{chatId}}",
                "messages"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Message sent OK', function() {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "// âœ… Capture message ID",
                  "let res = pm.response.json();",
                  "if (res.messageId) {",
                  "    pm.environment.set('msgId', res.messageId);",
                  "    console.log('Stored msgId:', res.messageId);",
                  "} else {",
                  "    console.warn('âš ï¸ messageId not found');",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Login User1",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"email\":\"{{email_1}}\",\"password\":\"{{password_1}}\",\"rememberMe\":true}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/auth/login",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "auth",
                "login"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Login User1 OK', function() {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "console.log('âœ… Logged in as User1');"
                ]
              }
            }
          ]
        },
        {
          "name": "Fetch Chat Messages",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/v1/chats/{{chatId}}/messages",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "chats",
                "{{chatId}}",
                "messages"
              ]
            }
          }
        },
        {
          "name": "Send Message (User1 â†’ User0)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"text\": \"Hey user_0! Iâ€™m good, thanks.\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/chats/{{chatId}}/messages",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "chats",
                "{{chatId}}",
                "messages"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Message sent OK', function() {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Delete Message",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/v1/chats/{{chatId}}/messages/{{msgId}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "chats",
                "{{chatId}}",
                "messages",
                "{{msgId}}"
              ]
            }
          }
        },
        {
          "name": "List Participants",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/v1/chats/{{chatId}}/participants",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "chats",
                "{{chatId}}",
                "participants"
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Notifications",
      "item": [
        {
          "name": "Register User Test Variants",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{{currentUser}}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/auth/register",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "auth",
                "register"
              ]
            }
          },
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "// Initialize index",
                  "if (!pm.environment.get('currentIndex')) {",
                  "    pm.environment.set('currentIndex', 0);",
                  "}",
                  "// Array of test cases",
                  "const testCases = [",
                  "  {\"email\":\"user1@example.com\",\"password\":\"Pa$$w0rd!\",\"firstName\":\"John\",\"lastName\":\"Doe\",\"dateOfBirth\":\"2000-01-01\"},",
                  "  {\"email\":\"user2@example.com\",\"password\":\"Pa$$w0rd!\",\"firstName\":\"Jane\",\"lastName\":\"Smith\",\"dateOfBirth\":\"2000-02-02\"},",
                  "  {\"email\":\"user3@example.com\",\"password\":\"Pa$$w0rd!\",\"firstName\":\"Alice\",\"lastName\":\"Brown\",\"dateOfBirth\":\"2000-03-03\"},",
                  "  {\"email\":\"user4@example.com\",\"password\":\"Pa$$w0rd!\",\"firstName\":\"Bob\",\"lastName\":\"White\",\"dateOfBirth\":\"2000-04-04\"},",
                  "  {\"email\":\"avatar@example.com\",\"password\":\"Pa$$w0rd!\",\"firstName\":\"Avatar\",\"lastName\":\"User\",\"dateOfBirth\":\"1999-05-05\",\"nickname\":\"avuser\",\"aboutMe\":\"I have an avatar\",\"avatarId\":999999},",
                  "  {\"email\":\"invalid-email\",\"password\":\"123\",\"firstName\":\"Bad\",\"lastName\":\"Data\",\"dateOfBirth\":\"2000-01-01\"},",
                  "];",
                  "// Set current test case",
                  "let index = parseInt(pm.environment.get('currentIndex'));",
                  "pm.environment.set('currentUser', JSON.stringify(testCases[index]));"
                ]
              }
            },
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "// Capture response",
                  "const response = pm.response.json();",
                  "const status = pm.response.code;",
                  "",
                  "// Get current test case index",
                  "let index = parseInt(pm.environment.get('currentIndex'));",
                  "",
                  "// Define expected status per test case (200 for valid, 400 for invalid)",
                  "const expectedStatuses = [200, 200, 200, 200, 400, 400];",
                  "",
                  "// Test status code",
                  "pm.test('Check response status', function() {",
                  "    if (status === 500) {",
                  "        pm.environment.set('requestWith500', index);",
                  "        pm.expect.fail(`Request at index ${index} returned 500`);",
                  "    } else {",
                  "        pm.expect(status).to.eql(expectedStatuses[index]);",
                  "    }",
                  "});",
                  "",
                  "// Save userId/email for valid responses (status 200)",
                  "if (status === 200) {",
                  "    pm.environment.set(`userId_${index}`, response.payload.userId);",
                  "    pm.environment.set(`email_${index}`, response.payload.email);",
                  "}",
                  "",
                  "// Loop to next request",
                  "index++;",
                  "if (index < expectedStatuses.length) {",
                  "    pm.environment.set('currentIndex', index);",
                  "    pm.execution.setNextRequest('Register User Test Variants');",
                  "} else {",
                  "    pm.environment.unset('currentIndex');",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Login User1",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"email\":\"{{email_0}}\",\"password\":\"Pa$$w0rd!\",\"rememberMe\":true}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/auth/login"
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "// capture cookie automatically, Postman handles this",
                  "pm.test('Login User1 should be 200', function() {",
                  "    pm.expect(pm.response.code).to.eql(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "List Notifications",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/v1/notifications?page=1&limit=20",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "notifications"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "20"
                }
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('List Notifications should return 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "// Parse JSON response",
                  "var jsonData = pm.response.json();",
                  "",
                  "// Check if there is at least one notification",
                  "if (Array.isArray(jsonData) && jsonData.length > 0) {",
                  "    var firstNotificationId = jsonData[0].notificationId;",
                  "    pm.environment.set('notification_id', firstNotificationId);",
                  "    console.log('Stored notification_id:', firstNotificationId);",
                  "} else {",
                  "    console.warn('No notifications found to store.');",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Mark Notification Read",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/v1/notifications/{{notification_id}}/mark-read",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "notifications",
                "{{notification_id}}",
                "mark-read"
              ]
            }
          }
        },
        {
          "name": "Mark All Notifications Read",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/v1/notifications/mark-all-read",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "notifications",
                "mark-all-read"
              ]
            }
          }
        },
        {
          "name": "Unread Count",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/v1/notifications/unread-count",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "notifications",
                "unread-count"
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Search",
      "item": [
        {
          "name": "Global Search",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/v1/search?q=keyword&type=users",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "search"
              ],
              "query": [
                {
                  "key": "q",
                  "value": "keyword"
                },
                {
                  "key": "type",
                  "value": "users"
                }
              ]
            }
          }
        }
      ]
    }
  ]
}